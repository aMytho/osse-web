<app-header text="Tracks"></app-header>
<div class="flex flex-col gap-2 flex-wrap justify-around p-2">
  <div
    class="flex flex-col justify-between border border-solid border-emerald-200 from-emerald-200 to-emerald-50 rounded-md">
    <div>
      <div>
        <input #search (keydown.enter)="onSubmit()" (input)="onInput($event)" type="text"
          class="w-full py-4 px-2 rounded-xs bg-transparent text-white border-b border-solid border-emerald-300"
          placeholder="Search for a track">
      </div>
    </div>
  </div>
  <p class="text-white">Start typing to view results. Press enter to add all visible tracks. Click on a track to play
    it, or right click (hold on mobile) to select multiple tracks.
  </p>

  <div>
    <div class="bg-slate-600/60 rounded-md mt-4 p-4">
      <div class="flex justify-around gap-x-2" [ngClass]="{'pointer-events-none opacity-45 my-1': !editing()}">
        <button (click)="matrix.clearSelectedTracks()"
          class="font-semibold text-lg text-white hover:text-red-500 p-2 rounded-md bg-transparent group">
          Close
          <app-icon [icon]="close"></app-icon></button>
        <button (click)="addSelectedTracksToPlaylist()"
          class="font-semibold text-lg text-white p-2 rounded-md bg-transparent">Add to Playlist<app-icon
            [icon]="pencil"></app-icon></button>
        <button (click)="playSelectedTracks()"
          class="font-semibold text-lg text-white p-2 rounded-md bg-transparent">Play<app-icon
            [icon]="play"></app-icon></button>
      </div>

      <div [class.loading-matrix]="loading()">
        <app-track-matrix [tracks]="tracks()" (onClick)="addTrack($event)" (onModeChanged)="handleModeChange($event)"
          (onEmptySelection)="handleEmptySelection()"></app-track-matrix>
      </div>
    </div>
  </div>
</div>
